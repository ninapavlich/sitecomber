{% load results_tags %}

{% with incoming_links=object.incoming_links_with_prefetch.all %}
<h4>{{incoming_links|length}} Incoming link{% if incoming_links|length != 1 %}s{% endif %} from within {{object.site_domain.site}}</h4>
<ul class="list-unstyled">
  {% for link in incoming_links %}
  <li class="my-1 clearfix">
    <a
      href="{% url 'page-result-detail' link.site_domain.site.pk link.pk %}"
      title="{{link.last_status_code}}"
      >{{link.url}}
      <span
        class="status-code status-code-{{link.last_status_code}}"

      ></span
    ></a>
    <a
      class="float-right badge badge-info p-2"
      href="{{link.url}}"
      target="_blank"
      >Visit &nearr;</a
    >
  </li>
  {% empty %}
  <li>No internal links to this page found yet.</li>
  {% endfor %}
</ul>
{% endwith %}

{% with outgoing_links=object.outgoing_links_with_prefetch.all %}
<h4>{{outgoing_links|length}} Outgoing link{% if incoming_links|length != 1 %}s{% endif %} from this page</h4>
<ul class="list-unstyled">
  {% for link in outgoing_links %}
  <li class="my-1 clearfix">
    <a
      href="{% url 'page-result-detail' link.site_domain.site.pk link.pk %}"
      title="{{link.last_status_code}}"
      >{{link.url}}
      <span
        class="status-code status-code-{{link.last_status_code}}"
      ></span
    ></a>
    <a
      class="float-right badge badge-info p-2"
      href="{{link.url}}"
      target="_blank"
      >Visit &nearr;</a
    >
  </li>
  {% empty %}
  <li>No outgoing links found on this page.</li>
  {% endfor %}
</ul>
{% endwith %}
